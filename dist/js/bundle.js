(()=>{var e={357:()=>{navigator.geolocation?navigator.geolocation.getCurrentPosition((function(e){let t=e.coords.latitude,n=e.coords.longitude,c=9999,a="台北";fetch("https://opendata.cwb.gov.tw/api/v1/rest/datastore/F-D0047-091?Authorization=CWB-EF46CCF9-7FB5-4120-AA40-CFDDA8BC249C").then((e=>e.json())).then((e=>{console.log(e),e.records.locations[0].location.forEach((e=>{let l=e.lat,o=e.lon,i=((t-l)*(t-l)+(n-o)*(n-o))**.5;c>i&&(c=i,a=e.locationName)})),console.log(a)}))})):m.innerHTML="您的瀏覽器不支援 顯示地理位置 API ，請使用其它瀏覽器開啟 這個網址"},746:()=>{window.addEventListener("scroll",(()=>{const e=document.documentElement.scrollTop,t=document.querySelector(".js-header");e>55?t.classList.add("class","header--colored"):t.classList.remove("class","header--colored")}))},779:()=>{}},t={};function n(c){var a=t[c];if(void 0!==a)return a.exports;var l=t[c]={exports:{}};return e[c](l,l.exports,n),l.exports}(()=>{"use strict";n(746),n(779),n(357);let e=document.querySelector(".weather__menu-bar"),t=document.createElement("div"),c=["臺北市","新北市","桃園市","臺中市","臺南市","高雄市","基隆市","新竹市","嘉義市","新竹縣","苗栗縣","彰化縣","南投縣","雲林縣","嘉義縣","屏東縣","宜蘭縣","花蓮縣","臺東縣","澎湖縣","金門縣","連江縣"];function a(){e.lastChild==t&&e.removeChild(e.lastChild)}function l(e){const t=document.querySelector("head"),n=document.createElement("link");n.rel="stylesheet",n.type="text/css",n.href=`./dist/css/${e}`,t.appendChild(n)}async function o(e,t=null){let n=`https://opendata.cwb.gov.tw/api/v1/rest/datastore/${e}?Authorization=CWB-A91E69B8-CE2E-4DDA-A1F5-A22448AA9D4C&format=JSON`;t&&(n+=`&locationName=${t}`);const c=await fetch(n);return await c.json()}e.addEventListener("click",(n=>{let l=document.querySelector("#weather__menu-bar-icon");if("icon-down-open-big"==n.target.className)return function(){if(t.classList.add("weather__menu-bar-options"),e.appendChild(t),!t.firstChild)for(let e=0;e<c.length;e++){let n=c[e],a=document.createElement("button");a.classList.add("weather__menu-bar-option"),a.value=n,a.innerHTML=n,t.appendChild(a)}}(),l.classList.remove("icon-down-open-big"),void l.classList.add("icon-up-open-big");if("icon-up-open-big"==n.target.className)return a(),l.classList.remove("icon-up-open-big"),void l.classList.add("icon-down-open-big");if("weather__menu-bar-option"==n.target.className){let t=n.target.value,c=e.querySelector(".weather__menu-bar-text");return a(),c.innerHTML=t,l.classList.remove("icon-up-open-big"),l.classList.add("icon-down-open-big"),t}}),!1);const i={PoP12h:!0,T:!0,RH:!1,MinCI:!1,WS:!1,MaxAT:!1,Wx:!0,MaxCI:!1,MinT:!0,UVI:!1,WeatherDescription:!1,MinAT:!1,MaxT:!0,WD:!1,Td:!1};const r={Wx:!0,PoP:!0,MinT:!0,CI:!1,MaxT:!0};function s(e){let t="";return e<=1?t='<svg viewbox="-50 -50 100 100">\n        <circle class="sun" cx="0" cy="0" r="22"></circle>\n    </svg>':e<=3?t='<svg viewbox="-50 -50 100 100">\n        <circle class="sun" cx="0" cy="0" r="22"></circle>\n        <circle class="cloud" cx="-30" cy="30" r="20"></circle>\n        <circle class="cloud" cx="-15" cy="30" r="20"></circle>\n        <circle class="cloud" cx="0" cy="30" r="20"></circle>\n        <circle class="cloud" cx="-25" cy="10" r="15"></circle>\n        <circle class="cloud" cx="-7" cy="15" r="15"></circle>\n    </svg>':e<=7?t='<svg viewbox="-63 -40 100 100">\n        <circle class="cloud" cx="-30" cy="30" r="20"></circle>\n        <circle class="cloud" cx="-15" cy="30" r="20"></circle>\n        <circle class="cloud" cx="0" cy="30" r="20"></circle>\n        <circle class="cloud" cx="-25" cy="10" r="15"></circle>\n        <circle class="cloud" cx="-7" cy="15" r="15"></circle>\n    </svg>':e<=22&&(t='<svg viewbox="-63 -40 100 100">\n        <line\n            class="rain"\n            x1="-25"\n            y1="15"\n            x2="-25"\n            y2="35"\n        ></line>\n        <line\n            class="rain"\n            x1="-14"\n            y1="5"\n            x2="-14"\n            y2="25"\n        ></line>\n        <line class="rain" x1="-5" y1="20" x2="-5" y2="45"></line>\n        <circle class="cloud" cx="-30" cy="30" r="20"></circle>\n        <circle class="cloud" cx="-15" cy="30" r="20"></circle>\n        <circle class="cloud" cx="0" cy="30" r="20"></circle>\n        <circle class="cloud" cx="-25" cy="10" r="15"></circle>\n        <circle class="cloud" cx="-7" cy="15" r="15"></circle>\n    </svg>'),(new DOMParser).parseFromString(t,"text/html").querySelector("svg")}function d(e){const t=document.createElement("div");t.classList.add("weather__loading"),t.innerHTML=`<div class="weather__loading-bg">\n        <div class="weather__loading-bg-circle"></div>\n        <div class="weather__loading-bg-rect"></div>\n    </div>\n    <div class="weather__loading-content">\n        <p>${e}<p>\n        <div class="weather__loading-dot">\n            <div></div>\n            <div></div>\n            <div></div>\n        </div>\n    </div>`,document.body.appendChild(t)}l("weatherLoadingEffect.css");let u=null,m=null,h=0,p=0,v=0,g=!1;const w=document.querySelector(".weather__render"),_=document.querySelector(".weather__render-observer"),x=document.querySelector(".weather__UpdateTime > span"),C=document.querySelector(".icon-arrows-cw"),f=new IntersectionObserver((([e])=>{e&&e.isIntersecting&&function(e=null){g?p=0:(p=3*h,v=Math.min(u.length,p+3)),function(e=null){for(let e=p;e<v;e++){const t=u[e],n=document.createElement("label");n.classList.add("weather__itme");const c=document.createElement("input");c.classList.add("switch_weather"),c.type="checkbox";const a=document.createElement("div");a.classList.add("weather__weekWeather"),E(t.locationName,a);const l=document.createElement("div");l.textContent=t.locationName,l.classList.add("weather__info-county");const o=document.createElement("div");o.textContent=`${t.MaxT[0]}°C`,o.classList.add("weather__info-temperature");const i=document.createElement("div");i.textContent=t.Wx[0],i.classList.add("weather__info-meteorological");const r=document.createElement("div");r.appendChild(o),r.appendChild(i);const d=document.createElement("div");d.classList.add("weather__info"),d.appendChild(l),d.appendChild(r);const m=document.createElement("div");m.classList.add("weather__chart");for(let e=0;e<t.time.length;e++){const n=document.createElement("div");n.classList.add("weather__dayweather");const c=document.createElement("div");c.classList.add("weather__chart-time");const a=new Date(t.time[e]);c.textContent=`${a.getHours()} ${a.getHours()>=12?"PM":"AM"}`;const l=document.createElement("div");l.classList.add("weather__dayweather-icon"),l.appendChild(s(t.Wx2[e]));const o=document.createElement("div");o.classList.add("weather__chart-temperature");const i=document.createElement("div"),r=document.createElement("div");i.textContent=`${t.MaxT[e]}°`,r.textContent=`${t.MinT[e]}°`,o.appendChild(i),o.appendChild(r),n.appendChild(c),n.appendChild(l),n.appendChild(o),m.appendChild(n)}n.appendChild(c),n.appendChild(a),n.appendChild(d),n.appendChild(m),w.appendChild(n)}}(e),v==u.length&&f.unobserve(_),g?g=!1:h++}()})),y={0:"SUN",1:"MON",2:"TUE",3:"WED",4:"THU",5:"FRI",6:"SAT"};function E(e,t){const n=m.findIndex((t=>t.locationName==e)),c=m[n];for(let e=0;e<c.time.length;e++){const n=document.createElement("div");n.classList.add("weather__weekWeather-item");const a=new Date(c.time[e]).getDay(),l=document.createElement("h3");l.textContent=y[a],n.appendChild(l),n.append(s(c.Wx2[e])),t.appendChild(n)}}async function L(){u=await async function(e=null){return function(e){const t=[],n=e.records.location;let c=[];for(let e=0,a=n.length;e<a;e++){let a={};const l=n[e],o=l.weatherElement;for(let t=0,n=o.length;t<n;t++){const n=o[t];if(!r[`${n.elementName}`])continue;let l=n.time,i=(l.length,null),s=[],d=[];for(let a=0;(i=l[a])&&(0==e&&0==t&&c.push(i.startTime),"Wx"==n.elementName&&d.push(i.parameter.parameterValue),s.push(i.parameter.parameterName.trim()),!(s.length>=3));a++);a[`${n.elementName}`]=s,d.length>0&&(a[`${n.elementName}2`]=d)}a.time=c,a.locationName=l.locationName,t.push(a)}return t}(await o("F-C0032-001",e))}(),m=await async function(e=null){return function(e){const t=[],n=e.records.locations[0].location;let c=[];for(let e=0,a=n.length;e<a;e++){let a={};const l=n[e],o=l.weatherElement;for(let t=0,n=o.length;t<n;t++){const n=o[t];if(!i[`${n.elementName}`])continue;let l=n.time,r=(l.length,null),s=[],d=[],u=null;for(let a=0;r=l[a];a++){const a=new Date(r.startTime);if((!u||u.getDate()!=a.getDate())&&(0==e&&0==t&&c.push(r.startTime),"Wx"==n.elementName&&d.push(r.elementValue[1].value.trim()),s.push(r.elementValue[0].value.trim()),u=a,s.length>=7))break}a[`${n.elementName}`]=s,d.length>0&&(a[`${n.elementName}2`]=d)}a.time=c,a.locationName=l.locationName,t.push(a)}return t}(await o("F-D0047-091",e))}();const e=new Date;x.textContent=`更新時間：${e.getMonth()}/${e.getDate()} ${e.getHours().toString().padStart(2,"0")}:${e.getMinutes()}:${e.getSeconds().toString().padStart(2,"0")}`,function(){const e=document.querySelector(".weather__loading");e.classList.add("weather__loading--close"),setTimeout((()=>{document.body.removeChild(e)}),1e3)}()}window.addEventListener("DOMContentLoaded",(async function(){d("載入中"),await L(),f.observe(_)})),C.addEventListener("click",(async e=>{e.preventDefault(),d("資料更新中"),await L(),g=!0,w.innerHTML="",f.observe(_)})),l("base.css"),l("layout.css"),l("component.css")})()})();